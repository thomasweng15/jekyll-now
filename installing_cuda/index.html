<!DOCTYPE html>
<html>
  <head>
    <title>Installing NVIDIA drivers and CUDA on Ubuntu 16.04 and 18.04 – Thomas Weng – adventures in computing, productivity, and ?</title>

        <meta charset="utf-8" />
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'>

    
    <meta name="description" content="There are several ways to install NVIDIA drivers. This method using a runfile is the one that works most reliably for me.

" />
    <meta property="og:description" content="There are several ways to install NVIDIA drivers. This method using a runfile is the one that works most reliably for me.

" />
    
    <meta name="author" content="Thomas Weng" />

    
    <meta property="og:title" content="Installing NVIDIA drivers and CUDA on Ubuntu 16.04 and 18.04" />
    <meta property="twitter:title" content="Installing NVIDIA drivers and CUDA on Ubuntu 16.04 and 18.04" />
    

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Lora:normal,b,i,bi" rel="stylesheet">
    <script src="https://use.fontawesome.com/60beeb5aee.js" type="text/javascript"></script>

    <!-- Bootstrap -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <link rel="stylesheet" id="avadaredux-google-fonts-avada_theme_options-css" href="https://fonts.googleapis.com/css?family=Lato%3A300%2C400%2C700italic%2C700%7CPT+Serif%3A400&amp;subset=latin" type="text/css" media="all">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="alternate" type="application/rss+xml" title="Thomas Weng - adventures in computing, productivity, and ?" href="/feed.xml" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0/katex.min.css" integrity="sha384-TEMocfGvRuD1rIAacqrknm5BQZ7W7uWitoih+jMNFXQIbNl16bO8OZmylH/Vi/Ei" crossorigin="anonymous">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0/katex.min.js" integrity="sha384-jmxIlussZWB7qCuB+PgKG1uLjjxbVVIayPJwi6cG6Zb4YKq0JIw+OMnkkEC7kYCq" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0/contrib/auto-render.min.js" integrity="sha384-IiI65aU9ZYub2MY9zhtKd1H2ps7xxf+eb2YFG9lX6uRqpXCvBTOidPRCXCrQ++Uc" crossorigin="anonymous"></script>
    
    <link rel="shortcut icon" type="image/png" href="/favicon.png"  />

    <!-- Created with Jekyll Now - http://github.com/barryclark/jekyll-now -->
  </head>

  <body>
    <div class="wrapper-masthead">
      <div class="container">
        <header class="masthead clearfix">
          <a href="/" class="site-avatar"><img src="https://avatars3.githubusercontent.com/u/1114539?v=3&s=140" /></a>

          <div class="site-info">
            <h1 class="site-name"><a href="/">Thomas Weng</a></h1>
            <p class="site-description">adventures in computing, productivity, and ?</p>
          </div>

          <nav>
            <!-- <a href="/archive">Archive</a> -->
            <a href="/">Home</a>
            <a href="/blog">Blog</a>
            <a href="/cv">CV</a>
          </nav>
        </header>
      </div>
    </div>

    <div id="main" role="main" class="container">
      <div class="row">
<div class="col-sm-8">

<article class="post">
  <h1>Installing NVIDIA drivers and CUDA on Ubuntu 16.04 and 18.04</h1>

  <div class="author">
    <div>By Thomas Weng on July 23, 2020</div>
    
</div>



  <div class="content">
  <p>There are several ways to install NVIDIA drivers. This method using a runfile is the one that works most reliably for me.</p>

<ol>
  <li>
    <p>Determine the driver version and CUDA version you need. The versions will depend on the GPU you have and the code you want to run. For example, specific pytorch and tensorflow versions are tied to specific CUDA versions.</p>
  </li>
  <li>
    <p>Download the driver and CUDA version as a runfile from the NVIDIA website: <a href="https://developer.nvidia.com/cuda-downloads">CUDA Downloads</a></p>
  </li>
  <li>Disable the default nouveau drivers. Create a file at <code class="highlighter-rouge">/etc/modprobe.d/blacklist-nouveau.conf</code> and add the following:
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> blacklist nouveau
 options nouveau modeset=0
</code></pre></div>    </div>
    <p>Then regenerate the kernel initramfs: <code class="highlighter-rouge">sudo update-initramfs -u</code></p>
  </li>
  <li>
    <p>If you already have nvidia installed, uninstall it: <code class="highlighter-rouge">sudo apt-get purge nvidia-*</code> and reboot your machine.</p>
  </li>
  <li>
    <p>Upon restart, drop into the tty terminal with <code class="highlighter-rouge">Ctrl+Alt+F1</code> and log in.</p>
  </li>
  <li>
    <p>Stop running the gui. On Ubuntu 16.04 run <code class="highlighter-rouge">sudo service lightdm stop</code>, on 18.04 run <code class="highlighter-rouge">sudo systemctl stop gdm3.service</code>.</p>
  </li>
  <li>
    <p>Find the runfile you downloaded from step 2 and run it: <code class="highlighter-rouge">sudo sh ./NAME_OF_RUNFILE.run</code></p>
  </li>
  <li>
    <p>Follow the prompts to install the driver and CUDA. If the installation fails, you will need to check <code class="highlighter-rouge">/var/log/nvidia-installer.log</code> or <code class="highlighter-rouge">/var/log/cuda-installer.log</code> to find out why. You can test if the installation was successful by running <code class="highlighter-rouge">nvidia-smi</code>.Check the reported driver and CUDA versions.</p>
  </li>
  <li>
    <p>Restart the gui. On Ubuntu 16.04 run <code class="highlighter-rouge">sudo service lightdm start</code>, on 18.04 run <code class="highlighter-rouge">sudo systemctl start gdm3.service</code>.</p>
  </li>
  <li>Leave the tty terminal and return to the gui: <code class="highlighter-rouge">Ctrl+Alt+F7</code>.</li>
</ol>

<p>For more detailed instructions, see the <a href="https://docs.nvidia.com/cuda/cuda-installation-guide-linux/index.html">NVIDIA CUDA Installation Guide</a>.</p>

  </div>

</article>

  
<div class="tags">
    Tags:
   
    <span class="tag"><a href="/tag/how-to">how-to</a></span>
   
</div>



  <div class="row pagenav">
      
      <div class="col-xs-6 prev_post"><a href="/emoji_in_terminal/">&larr; Replacing my command prompt with emoji</a></div>
      
      
      <div class="col-xs-6 next_post"><a href="/compressing_videos_ffmpeg/">Compressing Videos with ffmpeg &rarr;</a></div>
      
  </div>


  
<div class="comments">
	<div id="disqus_thread"></div>
	<script type="text/javascript">

	    var disqus_shortname = 'http-thomasweng-com';

	    (function() {
	        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	    })();

	</script>
	<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>



  </div>

  	 <div class="sidebar col-sm-4">
	   <h1>Recent Posts</h1>

	   <ul>
	     
	     <li><a href="/compressing_videos_ffmpeg/">Compressing Videos with ffmpeg</a></li>
	     
	     <li><a href="/installing_cuda/">Installing NVIDIA drivers and CUDA on Ubuntu 16.04 and 18.04</a></li>
	     
	     <li><a href="/emoji_in_terminal/">Replacing my command prompt with emoji</a></li>
	     
	     <li><a href="/azure_kinect_1604_ros/">How to install ROS drivers for Azure Kinect on Ubuntu 16.04</a></li>
	     
	     <li><a href="/terminal_tips/">Terminal tips</a></li>
	     
	   </ul>

	   <h1>Most Popular</h1>
	   <ul>
	     
	     <li><a href="/journaling/">How I Journal</a></li>
	     
	     <li><a href="/on_password_managers/">You Should Use a Password Manager</a></li>
	     
	   </ul>

	   <h1>Topics</h1>
	   <ul>
	     
	     
	     
	     
	     <li><a href="/tag/blogging">blogging</a> (1)</li>
	     
	     
	     
	     
	     <li><a href="/tag/how-to">how-to</a> (3)</li>
	     
	     
	     
	     
	     <li><a href="/tag/machine learning">machine learning</a> (1)</li>
	     
	     
	     
	     
	     
	     
	     <li><a href="/tag/productivity">productivity</a> (6)</li>
	     
	     
	     
	     
	     <li><a href="/tag/programming">programming</a> (1)</li>
	     
	     
	     
	     
	     <li><a href="/tag/robotics">robotics</a> (4)</li>
	     
	     
	     
	     
	     <li><a href="/tag/security">security</a> (1)</li>
	     
	     
	   </ul>

	 </div>

  
</div>


    </div>

    <div class="wrapper-footer">
      <div class="footer">
          
<a href="mailto:thomas.weng11@gmail.com"><i class="svg-icon email"></i></a>


<a href="https://github.com/thomasweng15"><i class="svg-icon github"></i></a>

<a href="https://www.linkedin.com/in/thomasweng"><i class="svg-icon linkedin"></i></a>

<a href="/feed.xml"><i class="svg-icon rss"></i></a>




      </div>
    </div>

    
	<!-- Google Analytics -->
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-50853593-1', 'auto');
		ga('send', 'pageview', {
		  'page': '/installing_cuda/',
		  'title': 'Installing NVIDIA drivers and CUDA on Ubuntu 16.04 and 18.04'
		});
	</script>
	<!-- End Google Analytics -->


    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js" type="text/javascript"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="/js/bootstrap.min.js" type="text/javascript"></script>
    <script>
      renderMathInElement(document.body);
    </script>
  </body>
</html>
